# PyBoardTypeshed

Typeshed (type hint interface stubs `.pyi`) for a
[Pyboard D](https://store.micropython.org/category/pyboard%20D-series), 
i.e. type hints and documentation for functions, classes, 
and constants for [MicroPython](http://micropython.org). 
These typesheds are useful for IDEs that understand type hints,
like PyCharm and VSCode, and for IDE plugins like the PyCharm's MicroPython plugin.

## What the typesheds do

Once installed, see next section, the typesheds offer:

1. Code completion (in this case prompting completion for `pyb`):\
   ![Code completion example](media/code.png "Possible code completions")

2. Rich help text (in this case constructor for `LCD160CR` showing types and 
   overloads as well as description):\
   ![Rich help example](media/help.png "Rich help for overloaded constructor")

3. Type errors (in this case a `float` instead of an `int`):\
   ![Type error example](media/type.png "Detects type error")

4. Typos (in this case `colour` instead of `color`; error can be avoided by 
   using code completion, see point 1 above):\
   ![Type error example](media/typo.png "Detects missing attribute due to typo")

## Using the typesheds

There are three ways of installing the Typesheds:
hopefully in the future via plugins, manually install into the IDE, 
and copy the `.pyi` files into a project.

### Via an IDE plugin

#### For PyCharm

Currently, October 2021, JetBrains have added many of these typesheds to their 
MicroPython plugin (many thanks to JetBrains and in particular Andrey Vlasovskikh).
Therefore, installing the JetBrains Micropython plugin
will be the easiest solution and also 
the typesheds will get updated everytime the plugin is updated:

1. Install the
   [MicroPython plugin](https://plugins.jetbrains.com/plugin/9777-micropython).

2. Enable the plugin for the project
   (two stages in project preferences/options:
   add the plugin to the project and then select options in the plugin):\
   ![Enable MicroPython plugin for project part 1](media/enable_pt1.png "Select MicroPython Language")
   ![Enable MicroPython plugin for project part 2](media/enable_pt2.png "Enable MicroPython support, select Pyboard, and select device path)")

The other options, below, unfortunately require manual updating and are more 
involved (though not difficult).

### Manually install in IDE

#### For PyCharm

If the very latest typesheds are required then they can be installed from
this repository directly.

**Note:** The following procedure, below, only needs to be done for one project; 
after which all projects using the
MicroPython plugin will pick up the typesheds.

1. Install and enable the plugin, see previous section above.

2. Download the ZIPed `.pyi` files from GitHub:\
   ![Download ZIPed files from GitHub](media/download.png "Select 'Download Zip' from 'Code' dropdown")

3. Unpack the ZIP file.

4. Drag (or copy and past) the `.pyi` (only) files into the Micropython Plugin
   (see image for which directory to put each file in):\
   ![Drag `.pyi` files into Plugin](media/typesheds.png "`.pyi` files in Micropython plugin")

5. Disable and re-enable plugin by going to preferences/options un-tick 
   Micropython support and Apply then re-tick
   MicroPython support and OK
   (so that it picks up the changes):\
   ![Re-enable MicroPython plugin](media/enable_pt2.png "Un-tick and OK back into preferences re-tick MicroPython support and OK")

### Copy `.pyi` files into project

**Note:** The following procedure, below, needs to be done for *all* projects:

1. Download the ZIPed `.pyi` files from GitHub:\
   ![Download ZIPed files from GitHub](media/download.png "Select 'Download Zip' from 'Code' dropdown")

2. Unpack the ZIP file.

3. Drag the `.pyi` (only) files into the top level of a project:\
   ![Drag `.pyi` files in top level of project](media/files.png "`.pyi` files in top level of project")

## Philosophy

The typesheds are generated by
[https://github.com/hlovatt/PyBoardTypeshedGenerator]()
from the MicroPython `.rst` doc files.

The philosophy of generating the typesheds is to take a superset of what is 
in the docs and what is listed by the `dir`
command on a Pyboard
(the docs and `dir` don't agree!). 
An example of the `dir` command having more information than the docs is the docs
for `pyb.Pin` mentions `board` and `cpu` classes and implies they contain 
declarations of available `Pin`s;
`dir(pyb.Pin.cpu)` on the other hand lists the `Pin`s, 
therefore the generated typeshed contains `board` and `cpu` *
with* `Pin` definitions.

**Note:** In the descriptions above, Pyboard means
[Pyboard D](https://store.micropython.org/category/pyboard%20D-series), 
not any other Pyboard. 
Though the other Pyboards are
similar and therefore the typesheds are still useful.
